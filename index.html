/*
Smart Irrigation â€” Single-file React App (Tailwind)
-------------------------------------------------
How to use:
1. Create a new Vite + React project (or CRA) and enable Tailwind CSS.
2. Save this file as `src/App.jsx` and ensure Tailwind is configured.
3. Install dependencies (optional but recommended):
   - npm install lucide-react recharts
4. Run dev server: npm run dev

Notes:
- This is a self-contained UI mock (no backend). Sample data and simulated sensor updates are included.
- The UI uses Tailwind classes. If you don't have Tailwind, the layout will still render but styles will be minimal.
*/

import React, { useEffect, useState } from "react";
import {
  Sun, Droplet, MapPin, Settings, Power, Calendar, Satellite,
} from "lucide-react";
import { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer, AreaChart, Area } from "recharts";

export default function App() {
  // Sample sensors state
  const [zones, setZones] = useState([
    { id: 1, name: "Front Lawn", moisture: 34, status: "idle", scheduleOn: false },
    { id: 2, name: "Orchard Row", moisture: 62, status: "idle", scheduleOn: true },
    { id: 3, name: "Greenhouse", moisture: 25, status: "watering", scheduleOn: false },
    { id: 4, name: "Backyard", moisture: 48, status: "idle", scheduleOn: false },
  ]);

  const [selectedZone, setSelectedZone] = useState(zones[0]);
  const [manualOn, setManualOn] = useState(false);
  const [schedule, setSchedule] = useState([
    { id: 1, zoneId: 1, time: "06:00", duration: 15 },
    { id: 2, zoneId: 3, time: "18:30", duration: 10 },
  ]);

  // Chart data sample (moisture over time)
  const sampleChartData = Array.from({ length: 12 }).map((_, i) => ({
    time: `${i}:00`, moisture: Math.round(30 + 30 * Math.sin(i / 2) + Math.random() * 6),
  }));

  useEffect(() => {
    // simulate sensor updates every 6 seconds
    const t = setInterval(() => {
      setZones(prev => prev.map(z => ({
        ...z,
        moisture: Math.max(12, Math.min(90, Math.round(z.moisture + (Math.random() * 6 - 3)))),
        status: z.status === "watering" ? (Math.random() > 0.6 ? "idle" : "watering") : (Math.random() > 0.985 ? "fault" : z.status),
      })));
    }, 6000);
    return () => clearInterval(t);
  }, []);

  useEffect(() => {
    const updatedSelected = zones.find(z => z.id === selectedZone?.id) || zones[0];
